<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StayConnected - Connect, Share, Stay Together</title>
    <meta name="description" content="Discover amazing places and connect with people around the world. Your next adventure starts here.">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/common.css">
</head>
<body>
<!-- Header -->
<header class="header">
    <nav class="nav-container">
        <div class="nav-content">
            <!-- Logo and Title -->
            <div class="logo-section">
                <h1 class="logo-title">StayConnected</h1>
            </div>

            <!-- Auth Buttons -->
            <div class="auth-buttons">
                <a th:href="@{/auth/login}" class="btn btn-ghost">[[#{index.login}]]</a>
                <a th:href="@{/auth/register}" class="btn btn-primary">[[#{index.register}]]</a>

                <div class="language-selector">
                    <button class="language-trigger">
                        <img id="currentLanguageFlag" alt="Current language" class="language-flag">
                        <span id="languageCodeUppercase"></span>
                        <svg class="chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="language-dropdown">
                        <a class="language-option" >
                            <img src="https://flagcdn.com/w40/gb.png" alt="English" class="language-flag">
                            <span class="language-name">English</span>
                            <span class="language-code">EN</span>
                        </a>
                        <a class="language-option" >
                            <img src="https://flagcdn.com/w40/de.png" alt="German" class="language-flag">
                            <span class="language-name">Deutsch</span>
                            <span class="language-code">DE</span>
                        </a>
                        <a  class="language-option" >
                            <img src="https://flagcdn.com/w40/bg.png" alt="Bulgarian" class="language-flag">
                            <span class="language-name">Bulgarian</span>
                            <span class="language-code">BG</span>
                        </a>
                        <a  class="language-option" >
                            <img src="https://flagcdn.com/w40/es.png" alt="Spanish" class="language-flag">
                            <span class="language-name">Espa√±ol</span>
                            <span class="language-code">ES</span>
                        </a>
                    </div>
                </div>
            </div>


        </div>
    </nav>
</header>

<!-- Hero Section -->
<main class="main-content">
    <div class="container">
        <div class="hero-section">
            <h2 class="hero-title">
                Connect, Share,
                <span class="hero-title-gradient">Stay Together</span>
            </h2>
            <p class="hero-description">[[#{index.description}]]</p>
            <div class="hero-buttons">
                <a th:href="@{/auth/register}" class="btn btn-primary btn-lg">[[#{index.get-started}]]</a>
                <!--Need to make a page for this button-->
            </div>
        </div>

        <!-- Features Section -->
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                    </svg>
                </div>
                <h3 class="feature-title">[[#{index.feature-title1}]]</h3>
                <p class="feature-description">[[#{index.feature-description1}]]</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                </div>
                <h3 class="feature-title">[[#{index.feature-title2}]]</h3>
                <p class="feature-description">[[#{index.feature-description2}]]</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">
                    <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                    </svg>
                </div>
                <h3 class="feature-title">[[#{index.feature-title3}]]</h3>
                <p class="feature-description">[[#{index.feature-description3}]]</p>
            </div>
        </div>
    </div>
</main>

<footer th:insert="fragments/footer :: footer"></footer>

<script>
    const anchors = document.querySelectorAll('.language-option');


    anchors.forEach(anchor => {
        anchor.addEventListener('click', () => {
            const languageCode = anchor.querySelector('.language-code').textContent.toLowerCase();
            localStorage.setItem("preferredLanguageCode", languageCode);
            window.location.href = `?lang=${languageCode}`;
        });
    });

    const preferredLanguageCode = localStorage.getItem("preferredLanguageCode") || "en";


    anchors.forEach(anchor => {
        anchor.classList.remove('active');
        if (anchor.querySelector('.language-code').textContent.toLowerCase() === preferredLanguageCode) {
            anchor.classList.add('active');
        }
    });

    const flags = {
        en: "https://flagcdn.com/w40/gb.png",
        de: "https://flagcdn.com/w40/de.png",
        bg: "https://flagcdn.com/w40/bg.png",
        es: "https://flagcdn.com/w40/es.png"
    };

    const languageCodeUppercase = document.getElementById("languageCodeUppercase");
    const currentLanguageFlag = document.getElementById("currentLanguageFlag");

    currentLanguageFlag.src = flags[preferredLanguageCode];
    languageCodeUppercase.textContent = preferredLanguageCode.toUpperCase();

    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');

    if (!langParam || langParam !== preferredLanguageCode) {
        window.location.href = `?lang=${localStorage.getItem("preferredLanguageCode") || "en"}`;
    }


</script>
</body>
</html>
